{% extends "base.html" %}
{%load staticfiles%}
{%load  consumerFilter%}
{% block content %}
<style type="text/css">
/*        .col-md-4,.col-sm-7{
        width:300px;
        height:900px;
        margin-left:-15px;
        margin-right:0px;
        padding-left:0px;
        padding-top:-15px;

        padding-right:15px;
        }
        .col-md-3,.col-sm-6{
        width:234px;
        height:auto;
        margin-left:0px;
        padding-left:0px;
        right-padding:10px;

        }
        .col-md-11{
        width:800px;
         border: 0.1px solid grey;
         }*/
/*#content{
       weight:350px;
        height:935px;
         border-style: 0.1px hidden grey;
         margin-left:-5px;
        margin-right:0px;
        margin-top:-10px;
        margin-bottom:-10px;
        padding-left:0px;

        padding-bottom:0px;
        padding-right:15px;
         }*/

        #portlet-content {
         background-color: #efefef;}
.portlet {
    margin-top: 0;
    margin-bottom: 0px;
    padding: 0px;
    border-radius: 2px;

 .switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
}

</style>

<div class="page-container">
    <!-- BEGIN CONTENT -->
    <div class="page-content-wrapper">
        <!-- BEGIN CONTENT BODY -->
        <!-- BEGIN PAGE HEAD-->
        <!-- <div class="page-head">
            <div class="container">
                <div class="page-title">
                    <h1>System Users</h1>
                </div>
            </div>
        </div> -->
        <div class="row eu_custom_heading">
            <label class="col-md-12 name eu_custom_pl20" style="margin-bottom: 0px !important;">
                <h2>System Users</h2>
            </label>
        </div>
        <!-- END PAGE HEAD-->
        <!-- BEGIN PAGE CONTENT BODY -->
        <div class="page-content eu_custom_validation_page_content">
            <div class="container eu_custom_validation_container">
                <div class="row eu_custom_validation_row_nm">
                    <div class="page-content-wrapper">
                        <label class="col-md-12" style="margin-bottom: 30px!important;font-size: 14px !important;">
                            <a href="" style="color: #ed1847 !important;">Meter Reading</a> &nbsp;&gt;&nbsp; <a
                                href="/meterreader/open-systemuser-index/" style="color: #ed1847 !important;">System
                            Users</a> &nbsp;&gt;&nbsp; <span style="color: #505050 !important;">Validator Details</span>
                        </label>

                    </div>
                </div>
                <div class="portlet light portlet-fit portlet-datatable ">
                    <div class="portlet-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="col-md-3 col-sm-5 eu_custom_pl0" style="border-top: 1px solid #efefef;">
                                    <div class="portlet yellow-crusta box" id="content"
                                         style="border: none !important;">
                                        <div class="portlet-title" style="background: #efefef !important;">
                                            <div class="row static-info eu_custom_pt20">
                                                <div class="col-md-4 name text-center actions stuts">
                                                    <img src="{%static 'assets/layouts/layout3/img/avatar3.jpg'%}"
                                                         alt="logo" class="logo-default"/>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="actions stuts">

                                                        <span style="font-size: 25px;word-wrap: break-word;">{{validatorData.employee_id}}</span>
                                                    </div>
                                                    <div class="actions stuts">

                                                        <span style="font-size: 18px; word-wrap: break-word;">{{validatorData.name}}</span>
                                                    </div>
                                                </div>
                                                <div class="col-md-1 actions stuts text-center">
                                                    <a class="fa fa-pencil"
                                                       onclick="openEditValidatorFrm()"
                                                       style="color: #ED1847 !important;">
                                                    </a>
                                                </div>

                                            </div>
                                            <div class="row static-info eu_custom_validation_row_nm eu_custom_pb10"
                                                 style="border-bottom: 1px solid #b0b0b0;">
                                                <div class="col-md-5 name" style="color: #505050;">Active:</div>
                                                <div class="col-md-7 name">
                                                    <input type="hidden" id="validator_id" name="validator_id"
                                                           value="{{validatorData.validatorid}}">
                                                    {% if validatorData.status == 'ACTIVE' %}
                                                    <input type="checkbox" data-size="small"
                                                           id="{{validatorData.validatorid}}"
                                                           class="make-switch user-status" data-on-text="Yes"
                                                           data-off-text="No" checked>
                                                    {% elif validatorData.status == 'INACTIVE' %}
                                                    <input type="checkbox" data-size="small"
                                                           id="{{validatorData.validatorid}}"
                                                           class="make-switch user-status" data-on-text="Yes"
                                                           data-off-text="No" unchecked>
                                                    {% endif %}
                                                </div>
                                            </div>
                                        </div>

                                        <div class="portlet-body " id="portlet-content">
                                            <div class="row static-info eu_custom_pt0">
                                                <div class="col-lg-8">Availability</div>
                                                <label class="col-lg-7 eu_custom_pt5 eu_custom_font_bold">{{validatorData.availability.available}}
                                                </label>
                                                <div class="col-lg-5" style="float: right;"><a data-toggle="modal"
                                                                                               href="#change">Change</a>
                                                </div>
                                                {% if validatorData.availability.available == 'NOT_AVAILABLE' %}
                                                <div class="col-md-12 name"> From
                                                    {{validatorData.availability.start_date}}
                                                    To{{validatorData.availability.end_date}}
                                                </div>
                                                {%endif%}


                                            </div>


                                            <div class="row static-info eu_custom_pt20">

                                                <div class="col-md-12 name eu_custom_p0">
                                                    <div class="form-group">
                                                        <label class="col-lg-12">Contact Number
                                                        </label>
                                                        <label class="col-lg-12 eu_custom_pt5 eu_custom_font_bold"
                                                               style="word-wrap: break-word;">{{validatorData.phone}}
                                                        </label>
                                                    </div>
                                                </div>
                                                <!-- <div class="col-md-7 name"><b>Contact Number:</b></div>
                                                <div class="col-md-7 value">{{mrData.phone}}</div> -->
                                            </div>
                                            <div class="row static-info eu_custom_pt20">
                                                <div class="col-md-12 name eu_custom_p0">
                                                    <div class="form-group">
                                                        <label class="col-lg-12">Email Id
                                                        </label>
                                                        <label class="col-lg-12 eu_custom_pt5 eu_custom_font_bold"
                                                               style="word-wrap: break-word;">{{validatorData.email}}</label>
                                                    </div>
                                                </div>
                                                <!--  <div class="col-md-7 name"><b>Email Id:</b></div>
                                                 <div class="col-md-7 value" style="word-wrap: break-word;">{{mrData.email}}</div> -->
                                            </div>
                                            <div class="row static-info eu_custom_pt20">
                                                <div class="col-md-12 name eu_custom_p0">
                                                    <div class="form-group">
                                                        <label class="col-lg-12">Address
                                                        </label>
                                                        <label class="col-lg-12 eu_custom_pt5 eu_custom_font_bold"
                                                               style="word-wrap: break-word;">{{validatorData.address}}</label>
                                                    </div>
                                                </div>
                                                <!-- <div class="col-md-7 name"><b>Address:</b></div>
                                                <div class="col-md-12 value"style="word-wrap: break-word;">{{mrData.address}}</div> -->
                                            </div>

                                        </div>
                                    </div>
                                </div>


                                    <div class ="cool-md-12">
                                <div class="col-md-2">
                                    <select required class="form-control" id="monthYear" style="margin-top: 5px"
                                            name="">
                                        {% for month in monthYears %}
                                        <option value="{{month.value}}" {% if currentmonth == month.value %} selected {% endif %}>
                                            {{month.text}}
                                        </option>
                                        {%endfor%}
                                    </select>

                                </div>
                                <div class="col-md-7 actions text-right">
                                     <div class="btn-group btn-group-devided">
                                        <!--<a class="cpink" href="{% url 'meterreader:reading_export_validator' validatorData.validatorid currentmonth %}">Export To Excel</a>-->
                                         <a class="cpink" href="{% url 'meterreader:reading_export_validator' validatorData.validatorid currentmonth %}">Export To Excel</a>
                                    </div>

                                </div>
                            </div>

                                <br>
                                <br>
                                <br>
                                <div class="page-content-inner">
                                    <div class="portlet-body-main">

                                        <div class="portlet-body eu_custom_pt0">
                                            <table class="table table-striped eu_custom_table_no_border"
                                                   id="userRoleTbl" style="width: 75%;">
                                                <thead style="background: #ededed !important;">
                                                <tr>
                                                    <th style="width:12%;">
                                                        <center> Month </center>
                                                    </th>
                                                    <th style="width:15%;">
                                                        <center> Bill Cycle </center>
                                                    </th>
                                                    <th style="width:15%;">
                                                        <center>Readings </center>
                                                    </th>

                                                     <th style="width:15%;">
                                                        <center>Completed </center>
                                                    </th>


                                                    <th style="width:15%;">
                                                        <center> Pendings </center>
                                                    </th>

                                                </tr>
                                                </thead>

                                                <tbody>
                                                {% for obj in finallist %}
                                                <tr role="row" class="even">
                                                    <td width="20%" class="sorting_1">
                                                        <center>{{obj.month|get_month}}</center>
                                                    </td>
                                                    <td width="20%">
                                                        <center>{{obj.billcycle}}</center>
                                                    </td>
                                                    <td width="20%">
                                                        <center>{{obj.readingrecived}}</center>
                                                    </td>

                                                    <td width="20%">
                                                        <center>{{obj.validatedrecord}}</center>
                                                    </td>

                                                    <td width="20%">
                                                        <center>{{obj.pending}}</center>
                                                    </td>

                                                </tr>
                                                {% endfor %}

                                                </tbody>

                                            </table>

                                        </div>

                                        <!-- End: life time stats -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" role="dialog" id="editDetail" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog ">

                        <div class="modal-content">
                            <div class="modal-header eu_custom_modal_header">
                                <button type="button" class="close" data-dismiss="modal"
                                        aria-hidden="true"></button>
                                <h4 class="modal-title"><b>Edit Validator</b></h4>
                            </div>

                                <form id="frmEditValidator" name="frmEditValidator" onkeypress="return event.keyCode != 13;">
                                    {% csrf_token %}
                                    <div class="modal-body">
                                    <input type="hidden" id="validatorid" name="validatorid"
                                           value="{{validatorData.validatorid}}">
                                    <div class="row">
                                        <div class="form-group col-lg-6">
                                            <label><h4><b>Basic Detail</b></h4></label>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="form-group col-lg-6">
                                            <label id=>First Name
                                                <span class="required"> * </span></label>
                                            <input value="{{validatorData.firstname}}" type="text" name="firstName"
                                                   id="confirmfirstName"
                                                   class="form-control" required/>
                                        </div>

                                        <div class="form-group col-lg-6">
                                            <label>Last Name
                                                <span class="required"> * </span>
                                            </label>
                                            <input value="{{validatorData.lastname}}" type="text" name="lastName"
                                                   id="confirmlastName"
                                                   pattern='[A-Za-z\\s]*'
                                                   class="form-control" required/>
                                        </div>
                                    </div>

                                    <div class="row">

                                        <div class="form-group col-lg-6">
                                            <label>Address</label>
                                            <input value="{{validatorData.address}}" type="text" name="address"
                                                   id="confirmaddress"
                                                   class="form-control"/>
                                        </div>

                                        <div class="form-group col-lg-6">
                                            <label>City<span class="required"> * </span> </label>
                                            <select required class="form-control" name="valCity">
                                                {% for city in citys %}
                                                {%if city.id == validatorData.city.id %}
                                                <option value="{{city.id}}" selected>{{city.city}}</option>
                                                {% else %}
                                                <option value="{{city.id}}">{{city.city}}</option>
                                                {% endif %}
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="form-group col-lg-6">
                                            <label id=>Employee ID
                                                <span class="required"> * </span></label>
                                            <input value="{{validatorData.employee_id}}" type="text" name="employeeId"
                                                   maxlength="8"
                                                   id="empId" class="form-control" required/>
                                        </div>

                                        <div class="form-group col-lg-6">
                                            <label> Role </label>
                                            <input value="{{validatorData.type}}" type="text" name="type"
                                                   id="confirmemail" class="form-control" readonly>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="form-group col-lg-6">
                                            <label>Contact Number</label>
                                            <input value="{{validatorData.phone}}" type="tel" name="contactNo"
                                                   id="confirmcontactNumber"
                                                   placeholder="Enter contact No"
                                                   maxlength="10" pattern="[0-9]{10}"
                                                   class="form-control"
                                                   title="Enter your mobile no."/>
                                        </div>
                                        <div class="form-group col-lg-6">
                                            <label> Email ID</label>
                                            <input value="{{validatorData.email}}" type="email" name="email"
                                                   id="confirmemail" class="form-control" readonly>
                                        </div>
                                    </div>

                                    <!--<label>Chnage Password</label>-->
                                    <div class="row">
                                        <div class="form-group col-lg-2">

                                            <input type="hidden" id="check_pwdchange_status"
                                                   name="check_pwdchange_status">

                                            <label>Change </label>
                                            <input type="checkbox" id="changePwd"
                                                   onclick="enableDisable(this.checked, 'textBox')">
                                        </div>


                                        <div class="form-group col-lg-5">
                                            <label>Password</label>
                                            <input type="password" name="password" id="password" pattern=".{6,}"
                                                   title="Password length should at least 6 character"
                                                   class="form-control"   required/>
                                        </div>

                                        <div class="form-group col-lg-5">
                                            <label>Retype Password</label>
                                            <input type="password" name="retypePassword"
                                                   id="retypePassword" class="form-control" required/>
                                            <div class="registrationFormAlert" pattern=".{6,}" id="divCheckPasswordMatch"></div>
                                        </div>
                                    </div>


                                    <div class="row">
                                        <div class="form-group col-lg-6">
                                            <label><h4><b>Preferred Bill Cycle</b></h4></label>
                                        </div>
                                    </div>

                                    <div class="row">

                                        <div class="form-group col-lg-6">
                                            <label>Bill Cycle-1 </label>
                                            <select value="All" id="prefBillCycleOne" name="prefBillCycleOne"
                                                    class="form-control">
                                                 <option value="All">All</option>

                                                {% for bill in billCycle %}
                                                {%if bill.bill_cycle_code == validatorData.billCycle1 %}
                                                <option value="{{bill.bill_cycle_code}}"selected>{{bill.bill_cycle_code}}</option>
                                                 {% else %}
                                                <option value="{{bill.bill_cycle_code}}">{{bill.bill_cycle_code}}</option>
                                                 {% endif %}
                                                  {% endfor %}
                                            </select>
                                        </div>

                                        <div class="form-group col-lg-6">
                                            <label>Bill Cycle-2 </label>
                                            <select value="All" id="prefBillCycleTwo" name="prefBillCycleTwo"
                                                    class="form-control">

                                                <option value="All">All</option>

                                                {% for bill in billCycle %}
                                                {%if bill.bill_cycle_code == validatorData.billCycle2 %}
                                                <option value="{{bill.bill_cycle_code}}" selected>
                                                    {{bill.bill_cycle_code}}
                                                </option>
                                                {% else %}
                                                <option value="{{bill.bill_cycle_code}}">{{bill.bill_cycle_code}}
                                                </option>
                                                {% endif %}

                                                {% endfor %}
                                            </select>
                                        </div>
                                        </div>

                                    <input type="submit" class="hide" id="edit_validator_submit">
                                </div>
                            </form>
                            <div class="modal-footer eu_custom_modal_footer">
                                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                                <button type="submit" id="btn_save" class="btn btn-success">Save</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal fade" role="dialog" id="change" tabindex="-1" aria-hidden="true">
                    <div class="modal-dialog ">

                        <div class="modal-content">
                            <div class="modal-header eu_custom_modal_header">
                                <button type="button" class="close" data-dismiss="modal"
                                        aria-hidden="true"></button>
                                <h4 class="modal-title"><b>Change Availability</b></h4>
                            </div>
                            <div class="modal-body">
                                <form id="frmchangedate">
                                    <input type="hidden" id="validatorid2" name="validatorid2"
                                           value="{{validatorData.validatorid}}">
                                    <div class="row">
                                        <div class="form-group col-lg-12">
                                            <div class="col-md-12 value">Name</div>
                                            <div class="col-md-12 value">{{validatorData.name}}</div>
                                        </div>
                                    </div>


                                    <div class="row">
                                        <div class="col-lg-12" id="availability">
                                            <div class="col-md-12">Availability</div>
                                            <ul class="radio-list list-inline"
                                                data-error-container="#form_2_membership_error">
                                                {% if validatorData.availability.available == 'AVAILABLE' %}
                                                <li><label>
                                                    <input type="radio" class="radio" name="chkavailable"
                                                           value="Available" checked/> Available </label>
                                                </li>
                                                <li>
                                                    <label>
                                                        <input type="radio" id="ntavailable"
                                                               class="radio" name="chkavailable" value="Notavailable"/>Not-Available
                                                    </label>

                                                </li>
                                                {% elif validatorData.availability.available == 'NOT_AVAILABLE' %}
                                                <li><label>
                                                    <input type="radio" class="radio" name="chkavailable"
                                                           value="Available"/> Available </label>
                                                </li>
                                                <li>
                                                    <label>
                                                        <input type="radio" id="ntavailable"
                                                               class="radio" name="chkavailable" value="Notavailable"
                                                               checked/>Not-Available
                                                    </label>
                                                </li>
                                                {% endif %}
                                            </ul>
                                        </div>
                                        <label class="error col-md-12" style="color:red; display:none;"></label>
                                    </div>

                                    <div class="row" id="date">
                                        <div class="form-group col-md-6 ">
                                            <label for=""> Start Date</label>
                                            <span class="required">*</span>
                                            <div class="input-group">
                                                <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                                                <input type="text" name="startDate" id="startDate"
                                                       class="form-control datepickerDate"
                                                       value="{{validatorData.availability.start_date}}">
                                                <label class="error" style="color:red; display:none;"></label>
                                            </div>
                                        </div>

                                        <div class="col-md-6 form-group">
                                            <label for=""> End Date</label>
                                            <span class="required">*</span>
                                            <div class="input-group">
                                                    <span class="input-group-addon"><i
                                                            class="fa fa-calendar"></i></span>
                                                <input type="text" name="endDate" id="endDate"
                                                       class="form-control datepickerDate"
                                                       value="{{validatorData.availability.end_date}}">
                                                <label class="error" style="color:red; display:none;"></label>
                                            </div>
                                        </div>
                                    </div>

                                </form>
                            </div>


                            <div class="modal-footer eu_custom_modal_footer">
                                <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>
                                <button type="submit" id="save_date" class="btn btn-success" data-dismiss="modal">Save
                                </button>
                            </div>


                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>
</div>

{% endblock %}
{% block js_block %}
<script src="{%static 'custom-js/detailValidator.js'%}" type="text/javascript"></script>
{% endblock %}
